import { useState, useEffect } from "react";
import { Link } from "react-router-dom";
import PropTypes from "prop-types";

export default function NavBar({nav}) {

  const [scrolled, setScrolled] = useState(false);
  const [changeIcon, setChangeIcon] = useState(false);
  const [showMenu, setShowMenu] = useState(false);
  const [widthWindows, setWidthWindows] = useState(window.innerWidth <= 768);

  const mode1 = changeIcon ? "xs:hidden" : "",
    mode2 = changeIcon ? "" : "xs:hidden",
    sMenu = showMenu ? "" : "xs:hidden";

  const handleClick = () => {
    setChangeIcon(!changeIcon);
    setShowMenu(!showMenu);
  };

  useEffect(() => {
    const handleScroll = () => {
      const isScrolled = window.scrollY > 600;
      setScrolled(isScrolled);
    };

    window.addEventListener('scroll', handleScroll);

    return () => {
      window.removeEventListener('scroll', handleScroll);
    };
  }, []);

  useEffect(() => {
    const handleResize = () => {
      const widthScreen= window.innerWidth <= 768;
      setWidthWindows(widthScreen);
    };

    window.addEventListener('resize', handleResize);

    
    return () => {
      window.removeEventListener('resize', handleResize);
    };
  }, []);

  const mobileDevice= widthWindows?"":"hidden";


  return (
    <>
      <aside className="xl:hidden">
        <svg onClick={handleClick} version="1.1" viewBox="0 0 40 40" alt="" width="40px" height="40px" fill={` ${scrolled?"black":"white"}`} className={"z-[999] fixed top-2 left-2 "+mode1}><path d="M13.293 20.8a.8.8 0 110-1.6h13.414a.8.8 0 110 1.6H13.293zm0 5a.8.8 0 110-1.6h13.414a.8.8 0 110 1.6H13.293zm0-10a.8.8 0 110-1.6h13.414a.8.8 0 110 1.6H13.293z" ></path></svg>
        <svg onClick={handleClick}  version="1.1" viewBox="0 0 40 40" alt=""width="40px" height="40px" fill="black" className={"z-[999] fixed top-2 left-2 "+mode2} ><path  d="M21.132 20l5.434-5.434a.802.802 0 00-1.132-1.132L20 18.868l-5.434-5.434a.802.802 0 00-1.132 1.132L18.868 20l-5.434 5.434a.802.802 0 001.132 1.132L20 21.132l5.434 5.434a.8.8 0 001.132-1.132L21.132 20z"  fillRule="evenodd"></path></svg>
      </aside>
      
      <aside className={"z-[998] fixed xl:mt-0 top-0 right-0 bottom-0 xl:bottom-unset left-0  bg-white  "+sMenu+ " "+mobileDevice}>
        <nav className={"mt-28 pl-8 [&>*:first-child]:text-pink-600 [&>*:first-child]:font-semibold"+sMenu}>
          {nav.map((item,index) => {
            return (
              <li key={index} className="p-2   list-none ">
                <a
                onClick={handleClick}
                  href={item.href}
                  className="uppercase "
                >
                  {item.text}
                </a>
              </li>
            );
          })}
          
        </nav>
      </aside>
        
      <nav className={`fixed w-full z-[998] top-0 p-2 flex flex-col duration-1000 ${scrolled?"bg-white xl:bg-transparent":""}  `}>
        <div className={`flex items-center xl:items-start justify-between mr-1.5 xl:mr-7 xl:pl-7  pl-10 duration-700 ${scrolled? "xl:mt-4": "xl:mt-7"}`}>
          <h1 className="flex flex-row">
            <svg version="1.1"  viewBox="0 0 360 54" className={`w-28 mr-10 duration-700 ${scrolled? "xl:w-[8.75rem]":"xl:w-[22.5rem]"}`} fill={`white ${scrolled || (changeIcon===true && widthWindows)? "black":""}`}>
              <path d="M326.062 31.1182L329.508 21.0413C331.388 15.4025 332.223 12.9485 332.798 10.8078C333.476 12.9485 334.103 15.2458 336.035 20.9891L339.376 31.1704H326.062V31.1182ZM99.0457 52.3162H111.263V32.5279H118.991L130.007 52.3162H144.783L131.469 31.4315C138.727 29.2908 142.799 24.174 142.799 16.4467C142.799 7.46628 136.377 1.14866 124.838 1.14866H99.0457V52.3162ZM122.489 22.7121H111.211V10.9645H122.489C126.822 10.9645 130.112 12.4786 130.112 16.9688C130.112 21.3024 126.822 22.7121 122.489 22.7121ZM51.9507 52.3162H91.0573V42.4482H64.1682V31.066H84.2698V21.198H64.1682V11.0167H91.0573V1.14866H51.9507V52.3162ZM171.15 53.4648C186.344 53.4648 193.445 46.2074 193.445 37.1748C193.445 27.6722 186.135 22.7121 175.17 21.1458L168.957 20.2582C164.78 19.6838 162.431 17.9086 162.431 14.9848C162.431 12.1131 164.78 9.50254 170.524 9.50254C176.685 9.50254 179.869 12.7919 181.279 17.3343L193.027 13.6795C191.043 6.05656 184.255 0 170.732 0C157.262 0 149.691 7.30964 149.691 15.7157C149.691 25.2705 155.956 29.9173 166.451 31.3793L172.873 32.2669C178.564 33.05 180.705 35.0341 180.705 37.9579C180.705 41.4039 177.833 43.9623 171.255 43.9623C163.997 43.9623 160.081 39.0022 159.141 34.1465L147.028 38.1146C148.856 46.8339 156.479 53.4648 171.15 53.4648ZM257.404 52.3162H269.621V39.5243L277.662 30.7005L289.723 52.3162H304.29L286.068 21.459L304.656 1.14866H288.365L269.674 22.5555V1.14866H257.456V52.3162H257.404ZM201.485 52.3162H213.859V31.1704H234.17V52.3162H246.544V1.14866H234.17V21.0413H213.859V1.14866H201.485V52.3162ZM305.595 52.3162H318.753L322.616 41.0384H342.718L346.425 52.3162H360L341.204 1.14866H324.392L305.595 52.3162ZM22.921 21.4068L12.1653 21.3546V10.9123H22.921C27.4634 10.9123 30.1784 12.322 30.1784 16.0812C30.1784 19.7883 27.4112 21.4068 22.921 21.4068ZM23.0776 42.6048H12.1653V30.5961L23.0776 30.5439C27.8811 30.5439 31.4315 32.3191 31.4315 36.6004C31.4315 40.934 27.8811 42.6048 23.0776 42.6048ZM0 52.3162H25.0094C35.9739 52.3162 43.8579 46.9906 43.8579 38.1146C43.8579 31.7447 39.4721 26.7846 31.9536 25.5315C38.6889 23.7041 42.1349 19.5272 42.1349 13.4706C42.1349 6.10878 36.235 1.09645 24.9572 1.09645H0V52.3162Z"></path>
            </svg>
            <ul className={`flex justify-start items-center duration-700 xs:hidden ${scrolled?"text-[black]":"hidden"} `}>
            <li className="mr-3 px-0.5">
              <Link to="/" className="pb-0.5">
              <p className="text-xs font-Whyte">WOMEN</p>
              </Link>
            </li>
            <li className="mx-3 px-0.5">
              <Link to="/" className="pb-0.5">
                <p className="text-xs font-Whyte"> MEN</p>
              </Link>
            </li>
            <li className="mx-3 px-0.5">
              <Link to="/" className="pb-0.5">
              <p className="flex justify-center items-center text-xs font-Whyte">
              <svg
                version="1.1"
                width="30px"
                viewBox="0 0 301 121"
                fill={`${scrolled?"black":"white"}`}
                alt="BSK"
              >
                <path d="M164.5,101.2h23.7l3.2-14.8l10.2-7.9l12.2,22.7h27.6l-21.2-35.5l30.3-24.3h-30.5l-23.4,20.1l9.2-43.6h-23.7 L164.5,101.2z M132.9,103.3c17.2,0,31.7-6.8,31.7-21.4c0-8.9-6.2-15.8-20.8-18.7l-6.6-1.3c-5.1-1-7.1-2.3-7.1-4.5 c0-2.4,2.1-4.4,6.3-4.4c5,0,7.6,2.9,8.2,6.4l22.9-3.9c-1.4-8.2-10-16.4-29.5-16.4c-18.1,0-29.7,8.2-29.7,21.1 c0,9.4,6.4,14.1,19.5,17.2l7.6,1.8c3.7,0.8,5.5,2.4,5.5,4.6c0,3.1-2.9,5-7.4,5c-6.3,0-8.4-3.7-9-7.6l-23.1,2.9 C102.4,95.7,113,103.3,132.9,103.3z M70.8,50.7H57.9L60.7,37h11.8c4.9,0,7.9,1.9,7.9,5.8C80.4,47.5,76.9,50.7,70.8,50.7z M65,82.2 H51.3l3.2-15.2h12.7c5.1,0,8.7,2.3,8.7,6.6C75.9,78.9,71.9,82.2,65,82.2z M21.9,101.2h45.5c19,0,34.1-8.7,34.1-25.1 c0-9-6.8-16.1-17-17.5c12.9-2.3,20.8-10.8,20.8-22.1c0-11.4-10.2-18.7-26.3-18.7H39.5L21.9,101.2z M132.9,112.2 c-15.7,0-27.2-4.5-33.9-11.9c-7.9,6.4-19.4,9.8-31.6,9.8H11L32.2,8.9H79c20.7,0,34.8,10.4,35.2,26.9c6.3-3.6,14.5-5.5,23.9-5.5 c14.2,0,24.2,3.9,30.3,9.6L175,8.9h41.9l-6.2,28.7l6.2-5.1h58.9L232,67.7l25.2,42.3h-48.6l-9.4-17.2l-3.9,17.2h-41.8l0.3-1.6 C147.6,111,140.2,112.2,132.9,112.2z M132.9,121c5.7,0,11.8-0.6,17.4-2.1h122.5l-29.2-49.1L301,23.6h-78.1l5-23.5h-60.1l-5.5,25.7 c-6.6-2.7-14.7-4.4-24.2-4.4c-6.2,0-11.9,0.8-17.2,2.3C115,9,99.3,0,79,0H25L0,118.8h67.5c11.2,0,22.1-2.6,30.8-7.6 C106.8,117.7,118.7,121,132.9,121z"></path>
              </svg>
              TEEN
            </p>
              </Link>
            </li>
          </ul>
          </h1>
          <div className="flex justify-center items-center xl:gap-2">
          <form className={`mr-4  duration-700 xs:hidden  `}>
            <button className={` flex justify-start items-center w-[11.5rem] py-0 px-1 bg-transparent border-[1px]  rounded-lg text-white duration-700  ${scrolled?"border-[black]":"border-[white]"} `} type="text">
                <svg version="1.1" className="w-[30px] h-[30px] duration-700" viewBox="0 0 40 40" alt="" fill={`${scrolled?"black":"white"}`}><path d="M18.201 22.742a4.948 4.948 0 01-3.362-1.8 4.947 4.947 0 01-1.106-3.65 4.953 4.953 0 011.8-3.362 4.945 4.945 0 013.65-1.105 4.948 4.948 0 013.361 1.799 4.95 4.95 0 011.107 3.65 4.95 4.95 0 01-1.8 3.362 4.976 4.976 0 01-3.65 1.106m9.502 4.744l-4.297-5.112a6.526 6.526 0 001.837-3.943 6.59 6.59 0 00-5.903-7.198 6.542 6.542 0 00-4.822 1.46 6.542 6.542 0 00-2.377 4.443 6.539 6.539 0 001.46 4.82 6.54 6.54 0 004.443 2.378 6.508 6.508 0 004.104-.968l4.33 5.149a.8.8 0 001.225-1.03"  fillRule="nonzero"></path></svg>
                <span className={`text-sm font-Whyte ${scrolled?"text-[black]":""}`}>Search</span>
            </button>
            
          </form>
          <svg version="1.1" width="40px" height="40px" viewBox="0 0 40 40" alt="" fill={`white ${scrolled || (changeIcon===true && widthWindows)?"black":""}`} className={`xl:hidden ${scrolled || changeIcon===true?"visible":"invisible"} `}><path d="M18.201 22.742a4.948 4.948 0 01-3.362-1.8 4.947 4.947 0 01-1.106-3.65 4.953 4.953 0 011.8-3.362 4.945 4.945 0 013.65-1.105 4.948 4.948 0 013.361 1.799 4.95 4.95 0 011.107 3.65 4.95 4.95 0 01-1.8 3.362 4.976 4.976 0 01-3.65 1.106m9.502 4.744l-4.297-5.112a6.526 6.526 0 001.837-3.943 6.59 6.59 0 00-5.903-7.198 6.542 6.542 0 00-4.822 1.46 6.542 6.542 0 00-2.377 4.443 6.539 6.539 0 001.46 4.82 6.54 6.54 0 004.443 2.378 6.508 6.508 0 004.104-.968l4.33 5.149a.8.8 0 001.225-1.03"  fillRule="nonzero"></path></svg>
          <svg version="1.1" viewBox="0 0 40 40" alt="" width="40px" height="40px" fill={`white ${scrolled || (changeIcon===true && widthWindows)?"black":""}`}><path d="M28.627 27.761V28a.8.8 0 11-1.6 0v-.238c0-.3-.11-.577-.282-.707-1.559-1.182-3.924-1.833-6.66-1.833s-5.103.651-6.66 1.833c-.171.13-.283.407-.283.707V28a.8.8 0 11-1.598 0v-.238c0-.807.34-1.547.913-1.982 1.836-1.39 4.544-2.157 7.627-2.157 3.085 0 5.793.766 7.628 2.157.573.435.915 1.175.915 1.982M15.902 16.59a4.208 4.208 0 014.595-3.769 4.209 4.209 0 013.77 4.596 4.178 4.178 0 01-1.518 2.836 4.179 4.179 0 01-3.08.933 4.183 4.183 0 01-2.836-1.517 4.182 4.182 0 01-.931-3.079m3.61 6.188a5.81 5.81 0 006.345-5.204 5.762 5.762 0 00-1.287-4.25 5.768 5.768 0 00-3.916-2.095 5.755 5.755 0 00-4.25 1.288 5.764 5.764 0 00-2.095 3.916 5.761 5.761 0 001.288 4.25 5.758 5.758 0 003.915 2.095" fillRule="nonzero"></path></svg>
          <svg version="1.1" viewBox="0 0 40 40" alt="" width="40px" height="40px" fill={`white ${scrolled || (changeIcon===true && widthWindows)?"black":""}`}><path fillRule="evenodd" clipRule="evenodd" d="M22.6752 11.3007C21.8889 10.154 20.5756 9.40002 19.081 9.40002C16.8543 9.40002 15.0291 11.0734 14.7503 13.2259H11.6422C10.8929 13.2259 10.2836 13.8421 10.2836 14.5839L10.0019 27.9379C9.97795 28.5034 10.1811 29.041 10.5749 29.4522C10.9696 29.8643 11.5253 30.1 12.0992 30.1H26.0618C26.6357 30.1 27.1915 29.8643 27.5862 29.4522C27.98 29.041 28.1841 28.5034 28.1601 27.9542L27.9883 19.8357C27.4224 19.518 26.9047 19.1766 26.4336 18.8175L26.6283 28.0056C26.6341 28.1493 26.5814 28.2864 26.4798 28.3928C26.3715 28.5059 26.223 28.5691 26.0621 28.5691H12.0994C11.9385 28.5691 11.79 28.5059 11.6817 28.3928C11.5801 28.2864 11.5274 28.1493 11.5342 27.9893L11.8139 14.7599H23.1691C22.7834 13.8463 22.6 12.9466 22.6 12.1271C22.6 11.8452 22.6258 11.569 22.6752 11.3007ZM21.8778 13.2256C21.6163 11.9193 20.4618 10.9322 19.0811 10.9322C17.6995 10.9322 16.545 11.9193 16.2834 13.2256H21.8778Z"></path><path d="M 27.099609 9.4003906 C 25.620148 9.4003906 24.400391 10.628273 24.400391 12.126953 C 24.400391 13.721308 25.481601 16.01333 28.248047 17.818359 L 28.205078 17.896484 L 28.904297 18.285156 L 29.603516 18.675781 L 29.603516 18.673828 L 29.835938 18.257812 C 33.128963 16.405676 34.300781 13.847758 34.300781 12.126953 C 34.300781 10.628273 33.079071 9.4003906 31.599609 9.4003906 C 30.662573 9.4003906 29.860738 9.878952 29.349609 10.541016 C 28.838481 9.878952 28.036646 9.4003906 27.099609 9.4003906 z M 27.099609 11 C 27.433573 11 27.867713 11.239395 28.083984 11.519531 L 29.349609 13.160156 L 30.617188 11.519531 C 30.833459 11.239395 31.265646 11 31.599609 11 C 32.199348 11 32.699219 11.486233 32.699219 12.126953 C 32.699219 13.037409 31.939051 15.056285 29.347656 16.648438 C 26.758764 15.056091 26 13.036968 26 12.126953 C 26 11.486233 26.499871 11 27.099609 11 z "></path></svg>
          </div>
        </div>
        <div className={` ml-8 mt-6 ${changeIcon===false?"xs:hidden":""}`}>
          <ul className={`flex justify-start items-center ${scrolled?"xl:hidden":"text-white"} `}>
            <li className="mr-3 px-0.5">
              <Link to="/" className="pb-0.5">
              <p className={`text-xs font-Whyte ${(changeIcon===true && widthWindows)?"text-black font-bold":""}`}>WOMEN</p>
              </Link>
            </li>
            <li className="mx-3 px-0.5">
              <Link to="/" className="pb-0.5">
                <p className={`text-xs font-Whyte ${(changeIcon===true && widthWindows)?"text-black font-bold":""}`}> MEN</p>
              </Link>
            </li>
            <li className="mx-3 px-0.5">
              <Link to="/" className="pb-0.5">
              <p className={`flex justify-center items-center text-xs font-Whyte ${(changeIcon===true && widthWindows)?"text-black font-bold":""}`}>
              <svg
                version="1.1"
                width="30px"
                viewBox="0 0 301 121"
                fill={`${scrolled || (changeIcon===true && widthWindows)?"black":"white"}`}
                alt="BSK"
              >
                <path d="M164.5,101.2h23.7l3.2-14.8l10.2-7.9l12.2,22.7h27.6l-21.2-35.5l30.3-24.3h-30.5l-23.4,20.1l9.2-43.6h-23.7 L164.5,101.2z M132.9,103.3c17.2,0,31.7-6.8,31.7-21.4c0-8.9-6.2-15.8-20.8-18.7l-6.6-1.3c-5.1-1-7.1-2.3-7.1-4.5 c0-2.4,2.1-4.4,6.3-4.4c5,0,7.6,2.9,8.2,6.4l22.9-3.9c-1.4-8.2-10-16.4-29.5-16.4c-18.1,0-29.7,8.2-29.7,21.1 c0,9.4,6.4,14.1,19.5,17.2l7.6,1.8c3.7,0.8,5.5,2.4,5.5,4.6c0,3.1-2.9,5-7.4,5c-6.3,0-8.4-3.7-9-7.6l-23.1,2.9 C102.4,95.7,113,103.3,132.9,103.3z M70.8,50.7H57.9L60.7,37h11.8c4.9,0,7.9,1.9,7.9,5.8C80.4,47.5,76.9,50.7,70.8,50.7z M65,82.2 H51.3l3.2-15.2h12.7c5.1,0,8.7,2.3,8.7,6.6C75.9,78.9,71.9,82.2,65,82.2z M21.9,101.2h45.5c19,0,34.1-8.7,34.1-25.1 c0-9-6.8-16.1-17-17.5c12.9-2.3,20.8-10.8,20.8-22.1c0-11.4-10.2-18.7-26.3-18.7H39.5L21.9,101.2z M132.9,112.2 c-15.7,0-27.2-4.5-33.9-11.9c-7.9,6.4-19.4,9.8-31.6,9.8H11L32.2,8.9H79c20.7,0,34.8,10.4,35.2,26.9c6.3-3.6,14.5-5.5,23.9-5.5 c14.2,0,24.2,3.9,30.3,9.6L175,8.9h41.9l-6.2,28.7l6.2-5.1h58.9L232,67.7l25.2,42.3h-48.6l-9.4-17.2l-3.9,17.2h-41.8l0.3-1.6 C147.6,111,140.2,112.2,132.9,112.2z M132.9,121c5.7,0,11.8-0.6,17.4-2.1h122.5l-29.2-49.1L301,23.6h-78.1l5-23.5h-60.1l-5.5,25.7 c-6.6-2.7-14.7-4.4-24.2-4.4c-6.2,0-11.9,0.8-17.2,2.3C115,9,99.3,0,79,0H25L0,118.8h67.5c11.2,0,22.1-2.6,30.8-7.6 C106.8,117.7,118.7,121,132.9,121z"></path>
              </svg>
              TEEN
            </p>
              </Link>
            </li>
          </ul>
        </div>
        <form className={`mx-1.5 mt-2 xl:hidden ${scrolled || changeIcon===true?"hidden":""}`}>
            <button className=" flex justify-start items-center w-full bg-transparent border-[1px] border-[white] rounded-lg text-white" type="text">
                <svg version="1.1" width="30px" height="30px" viewBox="0 0 40 40" alt="" fill="white"><path d="M18.201 22.742a4.948 4.948 0 01-3.362-1.8 4.947 4.947 0 01-1.106-3.65 4.953 4.953 0 011.8-3.362 4.945 4.945 0 013.65-1.105 4.948 4.948 0 013.361 1.799 4.95 4.95 0 011.107 3.65 4.95 4.95 0 01-1.8 3.362 4.976 4.976 0 01-3.65 1.106m9.502 4.744l-4.297-5.112a6.526 6.526 0 001.837-3.943 6.59 6.59 0 00-5.903-7.198 6.542 6.542 0 00-4.822 1.46 6.542 6.542 0 00-2.377 4.443 6.539 6.539 0 001.46 4.82 6.54 6.54 0 004.443 2.378 6.508 6.508 0 004.104-.968l4.33 5.149a.8.8 0 001.225-1.03"  fillRule="nonzero"></path></svg>
                <span>Search</span>
            </button>
            
        </form>

      </nav>
    </>
  );
}

NavBar.propTypes={
  nav:PropTypes.array,
}
